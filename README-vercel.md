# Vercel Deployment Guide

## Overview
Your restaurant management system has been restructured for Vercel deployment with serverless functions.

## Fixed Issues
✅ **Runtime Configuration**: Updated `vercel.json` to use `@vercel/node` runtime  
✅ **Import Dependencies**: Created simplified storage in `/api` directory  
✅ **CORS Support**: Added proper CORS headers to all serverless functions  
✅ **Build Configuration**: Set correct output directory to `dist/public`  

## Changes Made for Vercel
1. **Serverless API Functions**: Converted Express routes to individual Vercel serverless functions in the `/api` directory
2. **Vercel Configuration**: Added `vercel.json` with proper routing and build settings  
3. **Self-contained Storage**: Created `api/storage.js` to avoid complex import dependencies
4. **Static File Serving**: Frontend builds to `dist/public` for Vercel static hosting

## Deployment Steps

### 1. Deploy to Vercel
**Via GitHub Integration (Recommended):**
1. Push your code to GitHub repository
2. Connect repository to Vercel dashboard
3. Vercel will automatically detect the project and deploy
4. The build will use `vite build` command and serve from `dist/public`

**Via Vercel CLI:**
```bash
npm i -g vercel
vercel
```

### 2. Verify Deployment
After deployment, your API endpoints will be available at:
- `https://your-project.vercel.app/api/menu-items`
- `https://your-project.vercel.app/api/special-menu`
- `https://your-project.vercel.app/api/testimonials`  
- `https://your-project.vercel.app/api/gallery`
- `https://your-project.vercel.app/api/bookings`

## API Endpoints (Serverless Functions)
- `GET /api/menu-items` - Get restaurant menu items
- `GET /api/special-menu` - Get special menu items  
- `GET /api/testimonials` - Get customer testimonials
- `GET /api/gallery` - Get gallery images
- `POST /api/bookings` - Create table booking with validation

## Project Structure for Vercel
```
/
├── api/                 # Vercel serverless functions
│   ├── storage.js       # Self-contained data storage
│   ├── menu-items.js    # Menu items API
│   ├── special-menu.js  # Special menu API
│   ├── testimonials.js  # Testimonials API
│   ├── gallery.js       # Gallery images API
│   └── bookings.js      # Table bookings API
├── client/              # React frontend source  
├── dist/public/         # Built frontend (generated by vite build)
├── vercel.json          # Vercel configuration
├── package.json         # Dependencies and build scripts
└── README-vercel.md     # This deployment guide
```

## Key Configuration
**vercel.json:**
- Build command: `vite build`
- Output directory: `dist/public`
- Framework: `vite`
- No custom function configuration needed (uses defaults)

## Notes for Production
- **Data Storage**: Currently uses in-memory storage (resets on function calls)
- **Database Integration**: For production, connect to Vercel-compatible databases:
  - PlanetScale (MySQL)
  - Neon (PostgreSQL) 
  - Upstash (Redis)
- **Environment Variables**: Add via Vercel dashboard for database credentials
- **Static Assets**: All images and static files served via Vercel's global CDN